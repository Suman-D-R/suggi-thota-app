import { Tabs } from 'expo-router';
import { Platform } from 'react-native';
import { useSafeAreaInsets } from 'react-native-safe-area-context';
import Svg, { Path } from 'react-native-svg';
import { useLocationStore } from '../../store/locationStore';

export default function TabsLayout() {
  const insets = useSafeAreaInsets();
  const selectedStore = useLocationStore((state) => state.selectedStore);

  return (
    <Tabs
      screenOptions={{
        headerShown: false,
        tabBarActiveTintColor: '#059669', // Deep Vegetable Green (Matches your FAB)
        tabBarInactiveTintColor: '#9DA7AD', // Softer grey for inactive state
        tabBarStyle: selectedStore
          ? {
            backgroundColor: '#fff',
            borderTopWidth: 0, // Removed border for a cleaner shadow look
            ...Platform.select({
              ios: {
                shadowColor: '#000',
                shadowOffset: { width: 0, height: -2 },
                shadowOpacity: 0.08, // Much softer, modern shadow
                shadowRadius: 10,
                paddingTop: 8,
              },
              android: {
                elevation: 12, // Slightly higher elevation for clearer separation
                paddingBottom: Math.max(insets.bottom, 12),
                paddingTop: 4,
                height: 64 + Math.max(insets.bottom, 0), // Taller tab bar for modern click targets
              },
            }),
          }
          : { display: 'none' },
        tabBarLabelStyle: {
          fontSize: 10,
          fontWeight: '600', // Medium weight looks more premium
          marginTop: 2,
        },
        tabBarIconStyle: {
          marginBottom: -2,
        },
      }}
    >
      <Tabs.Screen
        name='home'
        options={{
          title: 'Home',
          tabBarIcon: ({ color, focused }) => (
            <Svg
              width={22}
              height={22}
              viewBox="0 0 512 512"
              fill="none"
            >
              <Path
                d="M335.388 76.603c3.131 2.716 6.359 5.314 9.576 7.928 9.601 7.81 19.148 15.684 28.573 23.707 3.899 3.309 7.875 6.506 11.884 9.68 2.987 2.413 5.908 4.9 8.828 7.395a364.856 364.856 0 0013.625 11.062c5.77 4.473 11.301 9.176 16.787 13.991 3.499 3.065 7.041 6.025 10.713 8.884 19.668 15.637 31.419 37.24 34.417 62.138.484 6.085.365 12.205.369 18.305a6941.315 6941.315 0 01.039 17.675l.011 8.087c.014 8.457.024 16.914.028 25.371.004 9.72.022 19.439.051 29.158.021 7.54.031 15.08.033 22.621.001 4.49.006 8.98.024 13.47.017 4.233.019 8.466.01 12.699 0 1.539.004 3.078.014 4.618.172 28.107-8.017 52.804-27.934 73.237-21.835 20.787-46.755 23.912-75.559 23.762-3.701-.016-7.402 0-11.103.019-2.39-.002-4.78-.006-7.17-.011l-3.296.018c-13.43-.122-24.59-3.317-34.598-12.522-11.576-12.248-12.998-25.564-13.016-41.696-.004-2.676-.021-5.351-.041-8.026-.055-7.601-.086-15.202-.111-22.803-.016-4.666-.046-9.332-.084-13.998a779.705 779.705 0 01-.018-5.298c-.001-16.824-2.121-30.102-14.023-42.742-7.782-7.505-16.456-11.225-27.293-11.769-12.622.462-21.864 5.783-30.313 14.687-10.144 11.878-11.101 24.532-11.117 39.521-.004 2.672-.021 5.343-.041 8.014-.055 7.59-.086 15.18-.111 22.77-.016 4.66-.046 9.319-.084 13.978a776.69 776.69 0 00-.018 5.287c-.001 15.844-1.325 29.269-12.547 41.469-11.219 10.604-23.227 13.024-38.207 13.012l-3.538.013c-2.465.006-4.929.006-7.393.002-3.717-.003-7.434.02-11.151.045-17.442.047-33.682-.456-49.605-8.361l-2.793-1.34C67.69 449.705 53.683 430.429 45.999 408c-3.58-11.941-4.153-23.316-4.161-35.693l-.016-4.768c-.013-4.302-.019-8.604-.024-12.907-.002-2.695-.007-5.391-.011-8.087-.014-8.457-.023-16.914-.027-25.371-.005-9.719-.022-19.439-.051-29.158-.022-7.54-.032-15.08-.033-22.62-.001-4.491-.007-8.981-.025-13.471a2116.34 2116.34 0 01-.01-12.699c0-1.539-.003-3.078-.013-4.617-.174-28.422 8.23-52.981 28.246-73.734 3.842-3.736 7.956-7.098 12.133-10.453 3.228-2.613 6.394-5.29 9.554-7.984a510.248 510.248 0 0113.844-11.344c3.074-2.482 6.085-5.032 9.094-7.594a503.935 503.935 0 0113.922-11.418c2.987-2.413 5.908-4.9 8.828-7.394a364.779 364.779 0 0113.625-11.063c5.773-4.475 11.301-9.186 16.798-13.995 4.17-3.644 8.392-7.19 12.752-10.606a339.561 339.561 0 005.805-4.672c48.07-39.18 104.504-30.869 149.159 8.25z"
                fill={color}
              />
            </Svg>
          ),
        }}
      />

      <Tabs.Screen
        name='categories'
        options={{
          title: 'Categories',
          tabBarIcon: ({ color, focused }) => (
            <Svg
              width={22}
              height={22}
              viewBox="0 0 512 512"
              fill="none"
            >
              <Path
                d="M407.639 44.975c10.475 8.746 20.072 18.397 29.701 28.05 2.48 2.486 4.971 4.96 7.466 7.432 1.954 1.939 3.9 3.885 5.845 5.833 1.352 1.35 2.709 2.694 4.068 4.038 13.604 13.706 22.986 28.393 23.656 48.173-1.077 30.553-24.746 49.937-44.813 70.062l-1.557 1.566c-5.821 5.844-11.708 11.537-18.005 16.872l-2.512 2.223c-13.165 11.132-27.409 14.857-44.302 13.968-24.636-2.152-41.854-22.502-58.28-38.969-2.59-2.594-5.194-5.174-7.799-7.753-16.824-16.76-32.243-32.876-32.482-57.969.218-18.609 8.095-31.92 20.838-44.884 1.588-1.67 3.079-3.4 4.572-5.155 4.92-5.67 10.274-10.92 15.589-16.216 1.81-1.804 3.614-3.613 5.417-5.423 5.812-5.816 11.621-11.573 17.959-16.822l2.984-2.477c21.001-16.314 49.615-19.039 71.655-2.549zM369.411 281.739c3.406.012 6.811.005 10.216-.007 49.423-.142 49.423-.142 68.624 17.955 11.256 11.811 15.885 25.909 15.911 42.024l.015 2.269c.014 2.465.021 4.93.027 7.395l.008 2.571c.015 4.497.025 8.993.029 13.49.005 4.608.029 9.216.058 13.824.019 3.574.024 7.149.025 10.723.003 1.696.011 3.393.024 5.09.145 19.86-3.125 36.311-17.41 51.056-12.05 11.34-26.308 16.005-42.67 16.032l-2.24.015c-2.427.015-4.854.021-7.281.027l-2.535.009c-4.432.015-8.864.024-13.295.028-4.54.006-9.08.03-13.619.058-3.524.019-7.048.024-10.571.025-1.672.003-3.343.011-5.015.025-18.867.139-35.373-2.502-49.535-16.145L298.001 446l-1.707-1.641c-14.197-14.833-14.444-35.297-14.461-54.531l-.01-4.004c-.006-2.78-.008-5.56-.008-8.34.001-2.816-.006-5.631-.02-8.447-.245-51.269-.245-51.269 17.405-70.424 19.475-18.356 45.214-16.958 70.211-16.874zM121.919 281.831l3.93-.01c2.728-.006 5.457-.008 8.186-.007 2.76 0 5.521-.007 8.281-.021 51.909-.253 51.909-.253 71.072 17.405 18.251 19.364 16.956 44.721 16.874 69.564-.011 3.473-.005 6.947.007 10.42.14 49.868.14 49.868-17.955 69.067-11.771 11.218-25.847 15.885-41.916 15.911l-2.235.015c-2.428.015-4.855.022-7.283.027l-2.534.009c-4.433.015-8.866.024-13.299.028-4.538.006-9.076.03-13.615.058-3.524.019-7.047.024-10.571.026-1.671.003-3.341.011-5.012.024-20.135.149-36.981-2.883-51.977-17.41-10.986-11.674-16.006-25.751-16.032-41.649l-.015-2.269c-.014-2.465-.021-4.93-.027-7.395l-.008-2.571c-.015-4.497-.025-8.993-.029-13.49-.005-4.608-.03-9.216-.058-13.824-.019-3.574-.024-7.148-.025-10.723-.003-1.696-.011-3.393-.024-5.09-.138-18.949 2.432-35.517 16.144-49.751l2.203-2.176 1.64-1.707c14.766-14.131 35.123-14.443 54.278-14.461zM106.712 47.838l2.269-.015c2.465-.014 4.93-.021 7.395-.027l2.571-.008c4.497-.015 8.993-.025 13.49-.029 4.608-.005 9.216-.03 13.824-.058 3.574-.019 7.148-.024 10.723-.025a838.15 838.15 0 005.089-.024c18.95-.138 35.518 2.432 49.752 16.144L214.001 66l1.707 1.641c14.131 14.765 14.443 35.122 14.461 54.277l.01 3.93c.006 2.728.008 5.457.007 8.186 0 2.76.007 5.521.02 8.281.238 48.726.238 48.726-13.205 65.685l-1.434 1.93c-8.426 10.742-21.383 16.771-34.566 19.07-8.64.951-17.233 1.16-25.918 1.168a4683.31 4683.31 0 01-12.116.018c-2.76 0-5.521.006-8.281.02-51.684.252-51.684.252-70.935-17.893-11.256-11.811-15.886-25.909-15.911-42.024l-.016-2.269c-.014-2.465-.02-4.93-.026-7.395l-.009-2.571c-.015-4.497-.024-8.993-.029-13.49-.005-4.608-.029-9.216-.057-13.824-.02-3.574-.024-7.148-.026-10.723a838.15 838.15 0 00-.024-5.089c-.144-19.86 3.126-36.312 17.41-51.057 11.674-10.986 25.75-16.006 41.649-16.032z"
                fill={color}
              />
            </Svg>
          ),
        }}
      />

      <Tabs.Screen
        name='reorder'
        options={{
          title: 'Reorder',
          tabBarIcon: ({ color, focused }) => (
            <Svg
              width={22}
              height={22}
              viewBox="0 0 512 512"
              fill="none"
            >
              <Path
                d="M244.512 30.875C296.116 29.61 343.559 56.495 380 91c4.049-3.36 7.73-6.769 11.313-10.625 5.345-5.4 10.735-7.89 18.25-8.813 7.436.947 12.566 2.907 17.929 8.23 4.079 5.97 4.947 11.751 4.734 18.767l-.038 2.474A784.278 784.278 0 01432 109l-.121 5.421c-.14 5.879-.318 11.756-.5 17.634l-.195 6.483c-.135 4.493-.272 8.986-.411 13.478-.176 5.726-.348 11.451-.517 17.177-.133 4.449-.268 8.898-.405 13.347l-.19 6.332c-1.1 37.008-1.1 37.008-10.727 47.401-5.252 4.69-11.465 6.747-18.418 6.992l-2.72.102-2.976.098-3.176.114c-3.506.124-7.012.242-10.519.358l-3.655.125c-7.296.247-14.592.487-21.888.723-5.314.172-10.628.352-15.942.534-7.178.245-14.356.481-21.534.707-3.901.123-7.801.249-11.701.384-3.701.128-7.402.245-11.103.354-2.014.062-4.027.135-6.04.209-9.523.263-17.927.102-25.531-6.227-5.673-5.724-6.184-11.556-6.262-19.402 1.556-9.798 8.128-15.254 15.127-21.696l2.142-2.039 1.97-1.813c1.533-1.714 1.533-1.714 1.087-3.892C272.47 179.152 255.988 171.022 244 166c-19.885-7.6-43.834-5.679-64 0l-2.712.749c-18.726 5.33-35.93 13.792-53.15 22.738-8.967 4.62-17.433 6.692-27.474 4.392-9.7-3.2-15.603-9.091-20.758-17.707-3.563-7.588-3.295-18.222-.656-26.047 7.677-16.33 21.285-31.542 33.5-44.692a186.615 186.615 0 005.5-6.246C122.964 89.2 132.56 80.152 143 72a953.786 953.786 0 003.16-2.606c28.356-23.246 61.733-36.697 98.352-38.52zM213.578 262.859a834.94 834.94 0 0110.963-.261l2.916-.11c6.787-.066 11.834 1.857 17.545 5.513 2.254 2.316 2.254 2.316 3.562 4.562l1.379 2.254c2.613 5.389 3.09 11.528 1.461 17.304-2.759 6.668-6.959 11.029-12.152 15.942l-2.403 2.334a686.958 686.958 0 01-5.847 5.604c8.541 14.656 23.191 24.06 39.238 28.996 39.864 10.375 80.033-6.151 114.741-24.793l3.005-1.613 2.648-1.442c7.174-3.478 16.56-3.258 24.118-1.086 9.193 3.644 15.132 10.075 19.25 18.938 3.334 8.809 2.711 17.497-1 26-5.757 10.848-13.193 20.57-21 30l-1.363 1.659c-12.096 14.684-24.977 29.172-39.637 41.341l-1.566 1.304c-23.837 19.762-49.811 34.473-80.434 40.696l-3.184.68c-18.245 3.26-37.772 2.277-55.816-1.68l-2.344-.504c-37.22-8.252-70.183-29.649-97.656-55.496-4.168 1.607-6.76 4.701-9.75 7.875-6.361 6.487-10.874 10.203-20.25 10.625-6.46-.252-11.059-1.67-15.75-6.184-4.868-5.44-6.556-9.423-6.492-16.789l-.002-2.28c.001-2.511.018-5.021.037-7.532l.02-5.364c.106-19.592.657-39.173 1.304-58.754.168-5.111.317-10.223.463-15.336.117-4.006.246-8.011.379-12.016.06-1.888.116-3.776.168-5.663.073-2.615.163-5.228.257-7.842l.052-2.29c.353-8.663 2.949-16.754 9.13-23.044 8.803-8.034 18.684-8.471 30.017-8.795l2.803-.089c3.046-.096 6.092-.186 9.137-.276l6.438-.198c4.504-.137 9.008-.272 13.511-.405 4.57-.136 9.139-.274 13.708-.416 12.814-.399 25.628-.77 38.443-1.089 3.318-.083 6.635-.175 9.953-.28z"
                fill={color}
              />
            </Svg>
          ),
        }}
      />

      <Tabs.Screen
        name='wishlist'
        options={{
          title: 'Wishlist',
          tabBarIcon: ({ color, focused }) => (
            <Svg
              width={22}
              height={22}
              viewBox="0 0 512 512"
              fill="none"
            >
              <Path
                d="M227.47 63.045c10.932 9.39 20.37 19.696 28.041 31.948v1.845h1.846l.696-1.985c10.389-23.728 38.399-43.158 61.555-52.429 30.939-11.802 63.546-11.204 94.028 1.798 34.001 15.3 57.951 43.779 71.198 78.127 5.71 16.32 8.15 32.38 8.164 49.63l.002 2.135c-.014 10.193-.366 19.853-3.002 29.756l-.465 1.847c-9.118 35.877-29.464 67.026-53.079 95.035l-1.299 1.549c-5.192 6.19-10.441 12.188-16.238 17.827-1.749 1.744-3.363 3.542-4.966 5.421-5.744 6.674-12.08 12.86-18.781 18.569-2.284 2.001-4.496 4.067-6.71 6.146-5.141 4.825-10.348 9.464-15.857 13.872a294.873 294.873 0 00-7.315 6.174 345.167 345.167 0 01-18.422 14.882c-2.083 1.578-4.152 3.175-6.221 4.772-22.272 17.154-45.551 33.038-69.44 47.864l-2.439 1.516c-5.311 3.259-9.595 5.385-16.025 4.424-6.886-2.723-13.075-6.937-19.213-11.015l-2.779-1.83c-2.828-1.865-5.65-3.737-8.472-5.609l-5.139-3.388c-15.265-10.086-30.149-20.603-44.713-31.674l-1.57-1.188c-15.834-11.983-31.185-24.622-45.793-38.073a306.976 306.976 0 00-5.906-5.21c-3.757-3.283-7.328-6.718-10.859-10.241l-1.896-1.886a2427.555 2427.555 0 01-3.935-3.926 2124.274 2124.274 0 00-5.949-5.909c-6.177-6.15-12.16-12.281-17.54-19.152-1.637-2.067-3.364-4.002-5.159-5.934-22.483-25.097-40.96-56.864-50.024-89.327l-.628-2.214c-5.495-20.357-5.514-45.657-.296-66.065l.541-2.249c5.509-22.564 15.472-43.008 30.847-60.493l2.042-2.38c43.86-50.143 120.185-55.704 171.17-12.96z"
                fill={color}
              />
            </Svg>
          ),
        }}
      />
    </Tabs>
  );
}
